model_name: finetuned/TinyLlama/TinyLlama-1.1B-Chat-v1.0/checkpoint-53835

dataset_name: cnn_dailymail
nrow: 2
col_renames:
  highlights: reference

dataset_output_dir: preprocessed
model_output_dir: test
log_dir: test

generation:
  prompt: |
    {article}
    TL;DR:
  max_new_tokens: 128
  temperature: 0.7
  top_p: 0.9
  top_k: 50
  num_return_sequences: 4

scorer:
  type: rouge
  rouge:
    type: rougeL

builder:
  type: cyclic

trainer:
  type: dpo
  dpo:
    logging_steps: 20
    per_device_train_batch_size: 4
    gradient_accumulation_steps: 4
    fp16: True
    num_train_epochs: 1.0
    save_steps: 4000
    save_total_limit: 20

validation:
  nrow: 3
  scorer:
    type: rouge
    rouge:
      type: rougeL
  generation:
    prompt: |
      {article}
      TL;DR:
    max_new_tokens: 128
    temperature: 0.7
    top_p: 0.9
    top_k: 50
    num_return_sequences: 1